%%{init: {
  'theme': 'base',
  'themeVariables': {
    'primaryColor': '#4a90d9',
    'primaryTextColor': '#ffffff',
    'primaryBorderColor': '#3a7bc8',
    'lineColor': '#5c6370',
    'secondaryColor': '#98c379',
    'tertiaryColor': '#e5c07b',
    'background': '#282c34',
    'mainBkg': '#282c34',
    'nodeBorder': '#528bff',
    'clusterBkg': '#3e4451',
    'titleColor': '#abb2bf',
    'edgeLabelBackground': '#282c34'
  }
}}%%

flowchart TB
    subgraph timer["â±ï¸ systemd å®šæ—¶å™¨"]
        T[æ¯ 15 ç§’è§¦å‘]
    end

    T --> CHECK

    CHECK["ğŸ” æ£€æŸ¥ç½‘ç»œè¿æ¥<br/>(é»˜è®¤ç½‘å…³æ£€æµ‹)"]

    CHECK --> CONNECTED
    CHECK --> DISCONNECTED

    CONNECTED["âœ… å·²è¿æ¥å¤–ç½‘<br/>â†’ æ— æ“ä½œ"]

    DISCONNECTED["âŒ æœªè¿æ¥å¤–ç½‘<br/>â†’ å¯åŠ¨ AP"]

    DISCONNECTED --> WEB["ğŸŒ å¯åŠ¨ Web æœåŠ¡<br/>(å¼ºåˆ¶é—¨æˆ·)"]

    WEB --> CONFIG["ğŸ“± ç”¨æˆ·é…ç½® WiFi"]

    CONFIG --> RESTORE["ğŸ”„ å…³é—­ AP çƒ­ç‚¹<br/>è¿æ¥æ–° WiFi"]

    RESTORE -.-> CHECK

    %% æ ·å¼å®šä¹‰
    classDef timerStyle fill:#61afef,stroke:#528bff,stroke-width:2px,color:#282c34
    classDef checkStyle fill:#e5c07b,stroke:#d19a66,stroke-width:2px,color:#282c34
    classDef successStyle fill:#98c379,stroke:#7cb668,stroke-width:2px,color:#282c34
    classDef failStyle fill:#e06c75,stroke:#be5046,stroke-width:2px,color:#ffffff
    classDef actionStyle fill:#c678dd,stroke:#a855d9,stroke-width:2px,color:#282c34

    class T timerStyle
    class CHECK checkStyle
    class CONNECTED successStyle
    class DISCONNECTED failStyle
    class WEB,CONFIG,RESTORE actionStyle

